!function(e){e.getUnavailablePreferences=function(e){return function(){var n=e();return n.enablenewlogin=!g_shownewloginoption,n.hidecontextspan=void 0===chrome.contextMenus,n}}(e.getUnavailablePreferences),e.initialize=function(){chrome.runtime.onConnect.addListener(function(n){if(0===n.name.indexOf("requestPort")){var t=e.initializeRequestFramework({sendContentScript:function(e){n.postMessage(e)},windowID:n.sender&&n.sender.tab?n.sender.tab.windowId:null,tabURL:n.sender&&n.sender.tab?n.sender.tab.url:null,tabID:n.sender&&n.sender.tab?n.sender.tab.id:null,frameIdentity:n.sender&&n.sender.tab&&n.sender.frameId?n.sender.tab.id+"-"+n.sender.frameId:null});n.onMessage.addListener(t.requestHandler),n.onDisconnect.addListener(function(){t.disconnectHandler()})}})},e.openPopoverDialog=function(n){e.openTabDialog.apply(e,arguments)},e.refreshGroupNames=function(){},e.closePopovers=function(){chrome.extension.getViews({type:"popup"}).forEach(function(e){e.close()})},e.getFavicon=function(){var e=null,n=function(e){var n="";try{var t=document.createElement("canvas");t.height=e.clientHeight,t.width=e.clientWidth,t.getContext("2d").drawImage(e,0,0),n=t.toDataURL()}catch(e){}return n},t=function(e,t){var o=document.createElement("img");o.src=e,o.addEventListener("load",function(){var e=n(o);document.body.removeChild(o),t(e)}),o.addEventListener("error",function(){t(""),document.body.removeChild(o)}),document.body.appendChild(o)},o=function(n){n.url&&n.callback&&t("chrome://favicon/"+n.url,function(t){n.callback(t===e?"":t)})};return document.addEventListener("DOMContentLoaded",function(){t("chrome://favicon/",function(n){e=n})}),o}(),function(){var n=function(e){var n=chrome.extension.getViews({type:"tab",windowId:e.windowID});if(1===n.length)return n[0];for(var t=0,o=n.length;t<o;++t){var a=n[t];if(a.tabID===e.tabID)return a}return null},t=function(e,t){LPTabs.get({tabID:e.id,callback:function(o){if(t.inject){var a=0,r=[].concat(t.inject.files),i=function(){++a===r.length&&(o.extendTop({context:t.inject.context}),t.inject.allFrames&&o.extendFrames({context:t.inject.context}),t.loadHandler&&t.loadHandler(o))};r.forEach(function(n){chrome.tabs.executeScript(e.id,{file:n,allFrames:t.inject.allFrames},i)})}else t.loadHandler&&t.loadHandler(o);if(t.closeHandler){var c=n(o.tabDetails);c&&c.addEventListener("beforeunload",function(){t.closeHandler(c)})}}})};e.getCurrentTab=function(e){chrome.tabs.query({active:!0,currentWindow:!0},function(n){1===n.length&&LPTabs.get({tabID:n[0].id,callback:e})})},e.openDialogWindow=function(e){var n=e.features||{};n.url=e.url,n.type=chrome.windows.CreateType.POPUP,chrome.windows.create(n,function(n){t(n.tabs[0],e)})},e.openTab=function(e){chrome.tabs.create({url:e.url,active:!e.inactive},function(n){t(n,e)})},e.openWindow=function(e){chrome.windows.create({url:e.url},function(n){t(n.tabs[0],e)})},e.openSame=function(e){chrome.tabs.update(null,{url:e.url},function(n){t(n,e)})},e.navigateTab=function(e){chrome.tabs.update(e.tabId,{url:e.url,active:!0},function(n){t(n,e)})},e.activateTab=function(e){chrome.windows.update(e.windowID,{focused:!0}),chrome.tabs.update(e.tabID,{active:!0})},e.closeTab=function(e){chrome.tabs.remove(e.tabID)},e.onTabUpdated=function(e){if("function"==typeof e){var n=function(n,t){"complete"===t.status&&LPTabs.get({tabID:t.tabId,callback:e})};chrome.tabs.onUpdated.addListener(n)}return function(){chrome.tabs.onUpdated.removeListener(n)}},e.onTabActivated=function(e){if("function"==typeof e){var n=function(n){LPTabs.get({tabID:n.tabId,callback:e})};chrome.tabs.onActivated.addListener(n)}return function(){chrome.tabs.onActivated.removeListener(n)}},e.onTabClosed=function(e){if("function"==typeof e){var n=function(n){e(n)};chrome.tabs.onRemoved.addListener(n)}return function(){chrome.tabs.onRemoved.removeListener(n)}},e.onTransition=function(e){if("function"==typeof e){var n=function(n){e(n)};chrome.webNavigation.onCommitted.addListener(n)}return function(){chrome.webNavigation.onCommitted.removeListener(n)}}}()}(LPPlatform);