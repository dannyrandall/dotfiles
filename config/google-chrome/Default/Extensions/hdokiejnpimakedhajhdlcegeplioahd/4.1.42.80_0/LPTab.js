LPTab=function(){var t=function(t,e,n){this.loadedContexts={},this.data=n,this.instance=e,this.tab=t};return t.prototype.extendInstance=function(t){t&&t.context&&!this.loadedContexts.hasOwnProperty(t.context)&&(Interfaces.createInstance(Interfaces[this.tab.tabDetails.interfaceName],{instance:this.instance,direct:!1,context:t.context,requestFunction:this.data.contentScriptRequester}),this.loadedContexts[t.context]=!0)},t.prototype.getFrameID=function(){return this.data.frameID},t.prototype.isTop=function(){return this.data.topWindow},t.prototype.getInstance=function(){return this.instance},function(e){var n=null,a={},i=new LPEventManager,s=0,o=null;this.tabDetails=e,this.getTop=function(){return n?n.instance:null},this.extendTop=function(t){n.extendInstance(t)};var r=function(){clearTimeout(o),c()>=s?i.publishEvent("framesloaded"):o=setTimeout(function(){i.publishEvent("framesloaded")},1e3)};this.addFrame=function(e,i){var o=new t(this,e,i);o.isTop()?n=o:a[o.getFrameID()]=o,s+=i.childFrameCount,r()},this.removeFrame=function(t){a[t]?(delete a[t],--s):n&&n.getFrameID()===t&&(n=null)},this.getFrames=function(){var t={};for(var e in a)t[e]=this.getFrame(e);return t},this.extendFrames=function(t){for(var e in a)a[e].extendInstance(t)},this.getFrame=function(t){var e=null;return a[t]?e=a[t]:n&&n.getFrameID()===t&&(e=n),e?e.getInstance():null};var c=function(){return Object.keys(a).length};this.isEmpty=function(){return null===n&&0===c()};var u=function(t,e){var n=Object.keys(t).length,a=0,i=function(){++a===n&&e.done()};for(var s in t)e.each(t[s],i)||--n;0===n&&e.done&&e.done()};this.forEachFrame=function(t){u(this.getFrames(),t)},this.forEachWindow=function(t){var e=this.getFrames(),n=this.getTop();n&&(e[0]=n),u(e,t)},this.activate=function(){this.isEmpty()||LPPlatform.activateTab({tabID:this.tabDetails.tabID,windowID:this.tabDetails.windowID,frameID:n.getFrameID()})},this.close=function(){this.isEmpty()||LPPlatform.closeTab({tabID:this.tabDetails.tabID,windowID:this.tabDetails.windowID,frameID:n.getFrameID()})},this.onFramesLoaded=function(t){i.addEventListenerOnce("framesloaded",t),setTimeout(r,1e3)}}}();