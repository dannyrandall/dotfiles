LPContentScriptTools=function(){var t=function(){var t=function(t){var e="";try{var n=document.createElement("canvas");n.height=t.clientHeight,n.width=t.clientWidth,n.getContext("2d").drawImage(t,0,0),e=n.toDataURL()}catch(t){}return e};return function(e,n){var r=document.createElement("img");r.src=e,r.addEventListener("load",function(){var e=t(r);document.body.removeChild(r),n(e)}),r.addEventListener("error",function(){n(""),document.body.removeChild(r)}),document.body.appendChild(r)}}(),e=function(e){for(var n=[],r=document.getElementsByTagName("link"),i=0,o=r.length;i<o;++i){var c=r[i],l=c.getAttribute("rel");if(l&&l.indexOf("icon")>-1){var u=c.getAttribute("href");"svg"!==u.substring(u.length-3)&&n.push(u)}}n.push(document.location.origin+"/favicon.ico");var a=0,f=function(r){r?e(r):a>n.length-1?bg.LPPlatform.getFavicon({url:document.location.href,callback:e}):t(n[a++],f)};f()},n=function(t,e){for(var n=t.nodeValue.trim(),r=null,i=0;i<e.searches.length;++i){var o=e.searches[i];if(e.exactMatch){if(n===o)return o;if(e.allowEmails){var c=n.split("@");if(2===c.length&&c[0]===o)return o}}else n.indexOf(o)>-1&&(null===r||o.length>r.length)&&(r=o)}return r},r=function(){var t=function(t){if(t.parentElement)switch(t.parentElement.nodeName){case"SCRIPT":return!1}return!0};return function(e){var r=[];if(e.searches){e.searches=[].concat(e.searches);for(var i=document.createTreeWalker(document.body,NodeFilter.SHOW_TEXT);i.nextNode();)if(t(i.currentNode)){var o=n(i.currentNode,e);if(o&&(r.push({parent:i.currentNode.parentElement,match:o,matchingText:i.currentNode.nodeValue.trim()}),!e.searchAll))break}}return e.searchAll?r:r[0]}}(),i=function(t){var e=r(t),n=e?e.match:null;return t.callback&&t.callback(n),n},o=function(){var t=!1;return window.addEventListener("beforeunload",function(e){e.isTrusted!==!1&&(t=!0)}),function(){return t}}(),c=function(t){return"FORM"===t.nodeName},l=function(t){if(t.scrollWidth>t.clientWidth){var e=$(t).css("overflow-x");return"auto"===e||"scroll"===e}},u=function(t){if(t.scrollHeight>t.clientHeight){switch($(t).css("overflow-y")){case"auto":case"scroll":return!0;case"visible":return t===document.body||!t.parentElement}}return!1},a=function(t){for(var e={top:0,left:0,width:window.innerWidth,height:window.innerHeight},n=t.parentElement;n;)n.scrollLeft>0&&(e.left-=n.scrollLeft),n.scrollTop>0&&(e.top-=n.scrollTop),l(n)&&(e.width+=n.scrollWidth-n.clientWidth),u(n)&&(e.height+=n.scrollHeight-n.clientHeight),n=n.parentElement;return e.right=e.left+e.width,e.bottom=e.top+e.height,e};return{getFavicon:e,findText:i,isUnloading:o,findTextNodes:r,isForm:c,getForm:function(t){for(;t;){if(c(t))return t;t=t.parentElement}return null},isClickable:function(t){if("function"==typeof document.elementFromPoint){t instanceof $&&(t=t.get(0));var e=t.getBoundingClientRect();return document.elementFromPoint(e.left+parseInt(e.width/2),e.top+parseInt(e.height/2))===t}return!0},isVisible:function(t){if(t instanceof $||(t=$(t)),!t.is(":visible"))return!1;var e=t.get(0).getBoundingClientRect(),n=a(t.get(0));return!(e.right<n.left||e.bottom<n.top||e.left>n.right||e.top>n.bottom)},getLabel:function(){var t=[function(t){if(t.getAttribute("id"))return $('label[for="'+t.getAttribute("id")+'"]').text()},function(t){return $(t).closest("label").text()},function(t){return t.getAttribute("placeholder")},function(t){for(var e=t;e;){var n=e.textContent;if(n){var r=n.split("\n").map(function(t){return t.trim()}).filter(function(t){return t.length>0});if(1===r.length)return r[0];break}e=e.previousSibling||e.parentElement}}];return function(e){for(var n=0;n<t.length;++n){var r=t[n](e);if(r)return r.trim()}return""}}(),getAttributes:function(t,e){for(var n={},r=0;r<e.length;++r){var i=t.getAttribute(e[r]);i&&(n[e[r]]=i)}return n},debounce:function(t,e,n){var r;return function(){var i=this,o=arguments,c=function(){r=null,n||t.apply(i,o)},l=n&&!r;clearTimeout(r),r=setTimeout(c,e),l&&t.apply(i,o)}}}}();