LPMessaging=function(t){var e=0,n={},r=0,a=function(t){var e={},n=!1;for(var r in t)if(t.hasOwnProperty(r)){var o=t[r];switch(typeof o){case"function":n=n||!0,e[r]=!0;break;case"object":e[r]=a(o),n=n||null!==e[r]}}return n?e:null},o=function(t){var e={};for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];switch(typeof r){case"function":e[n]=r,delete t[n];break;case"object":e[n]=o(r)}}return e},c=function(t){return"[object Object]"===Object.prototype.toString.call(t)},u=function(t){return"[object Array]"===Object.prototype.toString.call(t)},s=function(t){return c(t)&&null!==Object.getPrototypeOf(Object.getPrototypeOf(t))},f=function(t){var e=u(t)?[]:{};if(!s(t))for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];e[n]=c(r)?f(r):r}return e},i=function(t){t.args=f(t.args);var e=a(t.args);if(e){var c=++r;n[c]=o(t.args),t.requestID=c,t.functions=e}},l=function(t,e){return i(e.data),t(e)},p=function(e){var r=n[e.responseRequestID];delete n[e.responseRequestID];for(var a=0,o=e.callbackPath.length;a<o;++a)r=r[e.callbackPath[a]];r.apply(t,e.args)},v=function(t,e,n){return function(r){for(var a={responseRequestID:e.requestID,callbackPath:n},o=[],c=0,u=arguments.length;c<u;++c)o.push(arguments[c]);a.args=o,i(a),t(a)}},g=function(t,e,n,r,a){a=a||[];for(var o in n){var c=n[o];switch(typeof c){case"object":g(t,e[o],c,r,a.concat(o));break;default:e[o]=v(t,r,a.concat(o))}}};return{handleRequest:function(t,e,n,r){var a=e.args;g(n,a,e.functions,e),LPReflection.callFunction(t,e.cmd,a,r)},makeRequest:l,handleResponse:p,getNewMessageSourceID:function(t){return++e}}}(this);