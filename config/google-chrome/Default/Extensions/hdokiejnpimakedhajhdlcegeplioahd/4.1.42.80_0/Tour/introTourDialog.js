var IntroTourDialog=function(t){Dialog.call(this,t,{closeButtonEnabled:!1,maximizeButtonEnabled:!1,dynamicHeight:!0,hideHeader:!0,hideButtons:!0,confirmOnClose:!1,buttonsInsideContent:!0}),IntroTourDialog.prototype._arrow=null,IntroTourDialog.prototype._options=null};IntroTourDialog.prototype=Object.create(Dialog.prototype),IntroTourDialog.prototype.constructor=IntroTourDialog,function(t,o){function i(t,o,i,e,n){var s=0;switch(t){case"top":case"left":s=o?i:i+e;break;case"right":case"bottom":s=o?i+e-n:i-n}return s}function e(t,o,i,e,n){var s=0;switch(t){case"top":case"left":s=o;break;case"right":case"bottom":s=o+i-n;break;case"center":default:s=e-Math.round(n/2)}return s}IntroTourDialog.prototype.createButton=function(o,i,e,n){if(o&&i){var s=i.style||"",r=i.sizeStyle||"col-6",a=t("<div></div>").addClass(r).append(t("<button></button>").text(i.text).data("index",e).addClass("btn-base radius-sm "+s).off().on("click",n));o.append(a)}},IntroTourDialog.prototype.setup=function(i,e){if(e&&e.options&&e.flow){var n=this;n._options=t.extend({title:Strings.translateString("Tour Title here")},e.options);var s=n.$element.find(".buttons").empty();n.$element.removeClass().addClass("dialog responsive intro-tour-dialog"),n._options.class&&n.$element.addClass(n._options.class);for(var r=0;r<n._options.buttons.length;r++){var a=function(o){o.preventDefault(),e.flow.closeCurrentStep();var i=t(o.target).data("index");if(t.isNumeric(i)&&i>=0&&i<n._options.buttons.length){var s=n._options.buttons[i];s.action&&e.flow.executeAction(s.action)}};this.createButton(s,n._options.buttons[r],r,a)}var l=function(t){t.preventDefault(),e.flow.closeCurrentStep(),n._options.exitAction&&e.flow.executeAction(n._options.exitAction)};i.find("#btnClose").off().on("click",l),this.setText(this._options.title,this.$element.find("#mainTitle"));var p="function"==typeof this._options.contentText1?this._options.contentText1():this._options.contentText1;this.setText(p,this.$element.find("#contentText1"));var h="function"==typeof this._options.contentText2?this._options.contentText2():this._options.contentText2;this.setText(h,this.$element.find("#contentText2")),Dialog.prototype.setup.apply(this,arguments),this.setSize(this._options.position),this.setPosition(this._options.position),this._options.position&&this._options.position.arrowPosition?(this._arrow=this._arrow||new o({$parentEl:this.$element,arrowClass:"arrow-box a-white"}),this._arrow.show(this._options.position.orientation,this._options.position.arrowPosition)):this._arrow&&this._arrow.hide(),this.$overlayDialogEl=t("#dialogOverlay"),this.$overlayDialogEl&&this.$overlayDialogEl.length>0&&this.$overlayDialogEl.detach(),t("body").removeClass("dialogState"),this.subscribeToWindowResize()}},IntroTourDialog.prototype.setText=function(t,o){t&&o?o.text(t).show():o.hide()},IntroTourDialog.prototype.setPosition=function(o){o.dialogPosition=null,o&&o.targetId&&(o.$targetEl=t(o.targetId),o.targetDimensions=this.getDimensions(o.$targetEl),o.dialogPosition=this.computeDialogPosition(this.$element,o)),o.dialogPosition&&this.$element.offset(o.dialogPosition)},IntroTourDialog.prototype.setSize=function(o){if(o){o.$targetEl=t(o.targetId);var i=this.getDimensions(o.$targetEl);if(o.fillWidth){var e=t(o.fillWidth);e&&e.length>0?this.$element.width(e.width()):this.$element.width(i.width)}else this.$element.css("width","");if(o.fillHeight){var e=t(o.fillHeight);e&&e.length>0?this.$element.height(e.height()):this.$element.height(i.height)}else this.$element.css("height","")}},IntroTourDialog.prototype.subscribeToWindowResize=function(){var t=this;t.positionAndResizeHandler=function(o){t.setSize(t._options.position),t.setPosition(t._options.position)},window&&window.addEventListener("resize",t.positionAndResizeHandler),Topics.get(Topics.VAULT_LEFT_MENU_TOGGLE).subscribe(t.positionAndResizeHandler),Topics.get(Topics.EMPTY_VAULT_STATE_CHANGE).subscribe(t.positionAndResizeHandler)},IntroTourDialog.prototype.unSubscribeToWindowResize=function(){var t=this;window&&(window.removeEventListener&&window.removeEventListener("resize",t.positionAndResizeHandler),t.positionAndResizeHandler=null),Topics.get(Topics.VAULT_LEFT_MENU_TOGGLE).unsubscribe(t.positionAndResizeHandler),Topics.get(Topics.EMPTY_VAULT_STATE_CHANGE).unsubscribe(t.positionAndResizeHandler)},IntroTourDialog.prototype.computeDialogPosition=function(t,o){if(t&&t.length>0&&o&&o.$targetEl.length>0){var n=o.arrowPosition?15:0;o.dialogDimensions=this.getDimensions(t);var s={top:0,left:0},r=o.align||"center";switch(o.orientation){case"top":s.left=e(r,o.targetDimensions.left,o.targetDimensions.width,o.targetDimensions.center.left,o.dialogDimensions.width),s.top=i(o.orientation,o.inside,o.targetDimensions.top,o.targetDimensions.height,o.dialogDimensions.height)+n;break;case"bottom":s.left=e(r,o.targetDimensions.left,o.targetDimensions.width,o.targetDimensions.center.left,o.dialogDimensions.width),s.top=i(o.orientation,o.inside,o.targetDimensions.top,o.targetDimensions.height,o.dialogDimensions.height)-n;break;case"left":s.top=e(r,o.targetDimensions.top,o.targetDimensions.height,o.targetDimensions.center.top,o.dialogDimensions.height),s.left=i(o.orientation,o.inside,o.targetDimensions.left,o.targetDimensions.width,o.dialogDimensions.width)+n;break;case"right":s.top=e(r,o.targetDimensions.top,o.targetDimensions.height,o.targetDimensions.center.top,o.dialogDimensions.height),s.left=i(o.orientation,o.inside,o.targetDimensions.left,o.targetDimensions.width,o.dialogDimensions.width)-n}return o.offset&&(s.top+=o.offset.top,s.left+=o.offset.left),s}return null},IntroTourDialog.prototype.getDimensions=function(o){if(o&&o.length>0){var i=t.extend({height:o.height(),width:o.width()},o.offset());return i.center={top:Math.round(i.top+i.height/2),left:Math.round(i.left+i.width/2)},i}return null},IntroTourDialog.prototype.show=function(){Dialog.prototype.show.apply(this,arguments),t("body").removeClass("dialogState")},IntroTourDialog.prototype.hide=function(){Dialog.prototype.hide.apply(this,arguments),t("body").addClass("dialogState")},IntroTourDialog.prototype.close=function(o){o&&(Dialog.prototype.close.apply(this,arguments),t("body").removeClass("dialogState"),this.$overlayDialogEl&&t("body").append(this.$overlayDialogEl),this.unSubscribeToWindowResize())},IntroTourDialog.prototype.showBlurOverlay=function(){t("body").addClass("dialogState")},IntroTourDialog.prototype.hideBlurOverlay=function(){t("body").removeClass("dialogState")},IntroTourDialog.prototype.closeOnSuccess=function(){},IntroTourDialog.prototype.getZIndex=function(){var t=this.$element.css("z-index");if("auto"===t)return 0;var o=parseInt(t);return o<8?8:o}}(jQuery,lpArrow);