/*! Copyright 2009-2017 Evernote Corporation. All rights reserved. */
function AlternativeSelect(a,b,c,d){if("SELECT"!==b.tagName)throw new Error("Expected element 'select'");if(!b.classList.contains("alternativeSelect")){b.classList.add("alternativeSelect");var e=this;this._globalContainer=a,this._selectElement=b,this._styleClassName=c,this._positionFn=d,this._wrapperElement=document.createElement("div"),this._wrapperElement.classList.add("alternativeSelectWrapper"),this._wrapperElement.classList.add(c),this._selectElement.parentNode.insertBefore(this._wrapperElement,this._selectElement),this._selectElement.style.display="none",this._wrapperElement.appendChild(this._selectElement),this._clickerElement=document.createElement("div"),this._clickerElement.classList.add("alternativeSelectClicker"),this._clickerElement.addEventListener("click",function(){e.open()}),this._wrapperElement.appendChild(this._clickerElement),this._dropdownOverlay=document.createElement("div"),this._dropdownOverlay.classList.add("alternativeSelectOverlay"),this._dropdownOverlay.addEventListener("click",function(a){a.preventDefault(),e.close()}),this._dropdown=document.createElement("div"),this._dropdown.classList.add("alternativeSelectContainer"),this._dropdown.classList.add(this._styleClassName),this._selectElement.addEventListener("change",function(a){e.updateElement()}),this.updateElement()}}AlternativeSelect.prototype.updateSelection=function(){[].slice.call(this._dropdown.getElementsByClassName("alternativeSelectOption")).forEach(function(a){a.classList.toggle("alternativeSelectSelected",a.value===this._selectElement.value)},this)},AlternativeSelect.prototype.updateElement=function(){this._clickerElement.textContent=this._selectElement.options[this._selectElement.selectedIndex].textContent},AlternativeSelect.prototype.isOpen=function(){return!!this._dropdown.parentNode},AlternativeSelect.prototype.changeValue=function(a){this._selectElement.value!==a&&(this._selectElement.value=a,this._selectElement.dispatchEvent(new Event("change")))},AlternativeSelect.prototype.open=function(){function a(a){a.preventDefault(),b.close(),b.changeValue(a.currentTarget.value)}var b=this;this.isOpen()||([].slice.call(this._selectElement.getElementsByTagName("option")).forEach(function(b){var c=document.createElement("div");c.classList.add("alternativeSelectLabel"),c.textContent=b.textContent;var d=document.createElement("div");d.classList.add("alternativeSelectOption"),d.value=b.value,d.addEventListener("click",a),d.appendChild(c),this._dropdown.appendChild(d)},this),this._globalContainer.appendChild(this._dropdownOverlay),this._globalContainer.appendChild(this._dropdown),this.updateSelection());var c=this._clickerElement.getBoundingClientRect(),d=[Math.round(c.left),Math.round(c.bottom)];this._positionFn&&(d=this._positionFn(d)),this._dropdown.style.left=d[0]+"px",this._dropdown.style.top=d[1]+3+"px"},AlternativeSelect.prototype.close=function(){this.isOpen()&&(this._globalContainer.removeChild(this._dropdownOverlay),this._globalContainer.removeChild(this._dropdown),[].slice.call(this._dropdown.childNodes).forEach(function(a){this._dropdown.removeChild(a)},this))};