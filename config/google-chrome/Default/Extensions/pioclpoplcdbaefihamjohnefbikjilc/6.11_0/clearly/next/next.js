/*! Copyright 2009-2017 Evernote Corporation. All rights reserved. */
function initClearlyComponent__next(a){if(!a)return!1;var b=a;switch(!0){case!b.detectComponentInstance:case!b.callbacks:case!b.callbacks.newPageFound:return!1}b.document=!!b.window&&b.window.document,b.settings||(b.settings={});var c=function(a,c){b.settings[a]||(b.settings[a]=c)};c("onCreateNextPageFramesUseThisIdPrefix","clearly_next_page_frame__"),c("onCreateNextPagesContainerUseThisId","clearly_next_pages_container"),c("onCreateNextPagesContainerDoNotInsertCSS",!1),c("onLoadingNextPageFramesUseThisAttribute","clearly_next_page_loaded"),c("onLoadingNextPageFramesUseThisAttributeValue","yes"),c("doDocumentWrite",function(a,b){a.open(),a.write(b),a.close()});var d=b.detectComponentInstance,e=d.jQuery;return b.window=b.window?b.window:d.window,b.$window=b.window?e(b.window):d.$window,b.document=b.document?b.document:d.document,b.$document=b.document?e(b.document):d.$document,b.debug=d.debug,b.log=d.log,b.debugRemember=d.debugRemember,b.debugOutline=d.debugOutline,b.debugTimerStart=d.debugTimerStart,b.debugTimerEnd=d.debugTimerEnd,b.escape_html=d.escape_html,b.pages=[],b.originalDocumentDomain=d.window.location.hostname!=d.document.domain&&d.document.domain,b.encode=function(a){if(""==a)return"none";var b={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"};return a.replace(/[!'()*]/g,function(a){return b[a]})},b.decode=function(a){return"none"==a?"":decodeURIComponent(a)},b.parseOptions={_next_page_keywords:["next page","next","vorw&#228;rts","weiter","&#27425;&#12408;"],_next_page_keywords_not:["article","story","post","comment","section","chapter"]},b.createNextPagesContainer=function(){var a=b.settings.onCreateNextPagesContainerUseThisId,c=b.document.createElement("div");c.setAttribute("id",a),c.style.margin="0px",c.style.padding="0px",c.style.border="none",c.style.position="absolute",c.style.width="5px",c.style.height="5px",c.style.top="-10px",c.style.left="-10px",b.document.body.appendChild(c),b.nextPages=c,b.$nextPages=e(b.nextPages)},b.getURLPath=function(a){return a.substr(a.indexOf("/",a.indexOf("//")+2))},b.getURLDomain=function(a){return a.substr(0,a.indexOf("/",a.indexOf("//")+2))},b.nextPage__loadToFrame=function(a,c){var f=""+(d.document.characterSet||d.document.charset||"");e.ajax({url:c,type:"GET",dataType:"html",async:!0,timeout:1e4,beforeSend:function(a){a.overrideMimeType("text/html; charset="+b.escape_html(f))},success:function(d,e,f){b.nextPage__ajaxComplete(a,d,e,f,c)},error:function(c,d,e){b.nextPage__ajaxError(a,c,d,e)}})},b.nextPage__ajaxError=function(a,b,c,d){},b.nextPage__ajaxComplete=function(a,c,d,e,f){if(c>""){var g=c;g=g.replace(/<\s+/gi,"<"),g=g.replace(/\s+>/gi,">"),g=g.replace(/\s+\/>/gi,"/>"),g=g.replace(/<script[^>]*?>([\s\S]*?)<\/script>/gi,""),g=g.replace(/<script[^>]*?\/>/gi,""),g=g.replace(/<noscript[^>]*?>([\s\S]*?)<\/noscript>/gi,"");var h=b.document.createElement("iframe");h.setAttribute("id",b.escape_html(b.settings.onCreateNextPageFramesUseThisIdPrefix)+b.escape_html(""+a)),h.setAttribute("scrolling","no"),h.setAttribute("frameborder","0"),h.style.margin="0px",h.style.padding="0px",h.style.border="none",h.style.position="absolute",h.style.width="5px",h.style.height="5px",h.style.top="-10px",h.style.left="-10px",b.$nextPages.get(0).appendChild(h);var i=!1,j=function(){var c=b.document.getElementById(b.settings.onCreateNextPageFramesUseThisIdPrefix+a);if(c){var d=c.contentDocument||c.contentWindow.document;d&&(b.window.clearInterval(i),b.$nextPages.find("#"+b.settings.onCreateNextPageFramesUseThisIdPrefix+a).bind("load",function(){if(b.$nextPages.find("#"+b.settings.onCreateNextPageFramesUseThisIdPrefix+a).attr(b.settings.onLoadingNextPageFramesUseThisAttribute)!=b.settings.onLoadingNextPageFramesUseThisAttributeValue){var c=b.$nextPages.find("#"+b.settings.onCreateNextPageFramesUseThisIdPrefix+a).contents().get(0);c&&("interactive"!=c.readyState&&"complete"!=c.readyState||(b.$nextPages.find("#"+b.settings.onCreateNextPageFramesUseThisIdPrefix+a).attr(b.settings.onLoadingNextPageFramesUseThisAttribute,b.settings.onLoadingNextPageFramesUseThisAttributeValue),b.nextPage__loadedInFrame(a,c.defaultView)))}}),b.settings.doDocumentWrite(d,g))}};i=b.window.setInterval(j,50)}},b.nextPage__loadedInFrame=function(a,c){var e=d.getContent__findInPage(c),f=e._html,g=new RegExp("^(.*?)"+d.settings.articleTitleMarker__end,"i"),h=d.nextPage__getFirstFragment(f);switch(!0){case d.levenshteinDistance(h,b.nextPage__firstFragment__firstPage)<100:case d.levenshteinDistance(h,b.nextPage__firstFragment__lastPage)<100:return!1;default:b.nextPage__firstFragment__lastPage=h}f=d.getContent__find__isolateTitleInHTML(f,d.document.title>""?b.escape_html(d.document.title):""),f=f.replace(g,""),f=d.getContent__find__isolateTitleInHTML(f,d.articleTitle),f=f.replace(g,"");var i={_url:c.location.href,_html:f,_elements:[e._targetCandidate.__node]};return b.pages.push(i),b.callbacks.newPageFound&&b.callbacks.newPageFound(i),b.nextPage__find(c,e._links),!1},b.nextPage__find=function(a,c){var e=b.pages.length+1,f=[];if(f.length>0||(f=b.nextPage__find__possible(a,c,.5)),!(f.length>0))return void(b.debug&&b.log("no next link found"));b.debug&&b.log("possible next",f);var g=!1;!function(){if(!g)for(var a=0,c=f.length;a<c;a++)for(var d=0,e=b.parseOptions._next_page_keywords.length;d<e;d++)if(f[a]._caption.indexOf(b.parseOptions._next_page_keywords[d])>-1){if(f[a]._caption.length>2*b.parseOptions._next_page_keywords[d].length)continue;for(var h=0,i=b.parseOptions._next_page_keywords_not.length;h<i;h++)if(f[a]._caption.indexOf(b.parseOptions._next_page_keywords_not[h])>-1)return void(g=!1);return void(g=f[a])}}(),function(){if(!g)for(var a=0,b=f.length;a<b;a++)if(f[a]._caption==""+e)return void(g=f[a])}(),function(){if(!g)for(var a=0,c=f.length;a<c;a++)if(f[a]._title>""&&d.measureText__getTextLength(f[a]._caption)<=2)for(var e=0,h=b.parseOptions._next_page_keywords.length;e<h;e++)if(f[a]._title.indexOf(b.parseOptions._next_page_keywords[e])>-1){if(f[a]._title.length>2*b.parseOptions._next_page_keywords[e].length)continue;for(var i=0,j=b.parseOptions._next_page_keywords_not.length;i<j;i++)if(f[a]._title.indexOf(b.parseOptions._next_page_keywords_not[i])>-1)return void(g=!1);return void(g=f[a])}}(),g&&(b.debug&&(b.debugOutline(g._node,"target","next-page"),b.log("NextPage Link",g,g._node)),b.nextPage__loadToFrame(e,g._href))},b.nextPage__find__possible=function(a,c,f){var g=d.window.location.href,h=g.indexOf("?"),i=h>-1?g.substr(0,h):"",j=b.getURLDomain(g),k=b.getURLPath(g),l=e.map(c,function(a,c){var e=!1,h=a.__node.href,l=b.getURLPath(h),m=a.__node.title>""?a.__node.title.toLowerCase():"",n=a.__node.childNodes&&1==a.__node.childNodes.length&&a.__node.childNodes[0].tagName&&"img"==a.__node.childNodes[0].tagName.toLowerCase()&&a.__node.childNodes[0].title?a.__node.childNodes[0].title:"",o=a.__node.innerHTML.replace(/<[^>]+?>/gi,"").replace(/\&[^\&\s;]{1,10};/gi,"").replace(/\s+/gi," ").replace(/^ /,"").replace(/ $/,"").toLowerCase(),p=d.levenshteinDistance(k,l);m||n&&(m=n);var q=h.indexOf("?");if(q>-1&&i){var r=d.levenshteinDistance(b.getURLPath(i),l);r<p&&r>0&&(p=r,e=!0)}for(var s="",t=0,u=o.length,v=0;t<u;t++)v=o.charCodeAt(t),s+=v>127?"&#"+v+";":o.charAt(t);o=s;for(var w="",t=0,u=m.length,v=0;t<u;t++)v=m.charCodeAt(t),w+=v>127?"&#"+v+";":m.charAt(t);switch(m=w,!0){case!(h>""):case!e&&g.length>h.length:case j!=b.getURLDomain(h):case"#"==h.substr(g.length).substr(0,1):case p>Math.ceil(f*l.length):return null;default:for(var t=0,u=b.pages.length;t<u;t++)if(b.pages[t]._url==h)return null;return{_node:a.__node,_href:h,_title:m,_caption:o,_distance:p}}});return l.sort(function(a,b){switch(!0){case a._distance<b._distance:return-1;case a._distance>b._distance:return 1;default:return 0}}),l},b.start=function(){b.nextPage__firstFragment__firstPage=d.nextPage__firstFragment__firstPage,b.nextPage__firstFragment__lastPage=d.nextPage__firstFragment__lastPage,b.pages=[{_url:d.window.location.href}],b.nextPage__find(d.window,d.nextPage__firstLinks)},b}